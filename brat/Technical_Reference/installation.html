<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>BRAT</title>

      <meta name="viewport" content="width=device-width">
      <link rel="stylesheet" href="/brat/assets/css/style.css">
      <link rel="stylesheet" href="/brat/assets/css/custom.css">

      <link rel="apple-touch-icon" sizes="57x57" href="/brat/assets/images/favicons/apple-icon-57x57.png">
      <link rel="apple-touch-icon" sizes="60x60" href="/brat/assets/images/favicons/apple-icon-60x60.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/brat/assets/images/favicons/apple-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="76x76" href="/brat/assets/images/favicons/apple-icon-76x76.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/brat/assets/images/favicons/apple-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="/brat/assets/images/favicons/apple-icon-120x120.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/brat/assets/images/favicons/apple-icon-144x144.png">
      <link rel="apple-touch-icon" sizes="152x152" href="/brat/assets/images/favicons/apple-icon-152x152.png">
      <link rel="apple-touch-icon" sizes="180x180" href="/brat/assets/images/favicons/apple-icon-180x180.png">
      <link rel="icon" type="image/png" sizes="192x192"  href="/brat/assets/images/favicons/android-icon-192x192.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/brat/assets/images/favicons/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="96x96" href="/brat/assets/images/favicons/favicon-96x96.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/brat/assets/images/favicons/favicon-16x16.png">
      <link rel="manifest" href="/brat/assets/images/favicons/manifest.json">
      <meta name="msapplication-TileColor" content="#ffffff">
      <meta name="msapplication-TileImage" content="/brat/assets/images/favicons/ms-icon-144x144.png">
      <meta name="theme-color" content="#ffffff">
      <link rel="shortcut icon" href="/brat/assets/images/favicons/favicon.ico" />

      <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
  </head>

  <body>

  <header>
    <div id="topbarnav"></div>
    <div id="headcallout" class="text-center callout large">
      
<h4 class="subheader show-for-medium"><a href="/brat/">BRAT</a></h4>   
<h1>Installation</h1>
    


    </div>
  </header>

  <div id="inner-wrapper">
    <div id="inner" class="row">
      <div id="main" class="large-8 columns large-push-4">
        <section><p>BRAT is written in <a href="http://python.org">Python</a> and exclusively uses open source libraries. You do <strong>not</strong> need ArcGIS to run the latest version of BRAT. However, the cost of this open source freedom is that some of the open source libraries used can be tricky to install, especially on Microsoft Windows (see the <a href="http://127.0.0.1:4001/sqlBRAT/Technical_Reference/installation.html#why-was-this-so-hard">explanation at the bottom of this page</a> as to why this is).</p>

<h1 id="preparation">Preparation</h1>

<p>Before you perform the instructions below it is strongly recommended that you are familiar with Python <a href="https://www.python.org/dev/peps/pep-0405/">Virtual Environments</a>. This is a way to isolate a copy of Python together with all the necessary site packages and avoid conflicts with other uses of Python on your computer. It is invaluable when you need to ensure a specific version of your dependencies (as is the case with <a href="https://gdal.org/">GDAL</a> for BRAT) or when you have multiple versions of Python on your computer (as is often the case if you have ArcGIS installed).</p>

<h1 id="1-python">1. Python</h1>

<p><a href="https://www.python.org/downloads/release/python-374/">Python 3.7.4</a> is required and the specific version matters! Preferably 64 bit, but 32 bit is OK too. Note that if you already have a copy of Python 2 or 3 installed that you can install 3.7.4 alongside these other versions and use a Virtual Environment to ensure that BRAT uses the correct version.</p>

<h1 id="2-pip">2. PIP</h1>

<p>You will need <a href="https://pypi.org/project/pip">PIP</a> installed for the Python 3.7.4 version that you are using. You should already have PIP if you installed a newer version of Python downloaded from Python.org but here are the <a href="https://pip.pypa.io/en/stable/installing/">PIP installation instructions</a> that show how to verify if this is the case.</p>

<h1 id="3-text-editor">3. Text Editor</h1>

<p>BRAT is a command line tool. It does not currently have a user interface. We strongly recommend a good text editor with Python development tools to run BRAT. We recommend <a href="https://code.visualstudio.com">Visual Studio Code</a> or <a href="https://www.jetbrains.com/pycharm">pyCharm</a> Community edition, both of which are free.</p>

<h1 id="4-desktop-gis">4. Desktop GIS</h1>

<p>BRAT is a spatially explicit model and you will want desktop GIS software to visualize the data. If you have have ArcGIS then you should also install the <a href="https://rave.riverscapes.xyz/">RAVE AddIn</a> that will automate viewing BRAT projects and layers. However, you can also use the free and open source <a href="https://www.qgis.org/en/site/">QGIS</a> and symbolize the map layers yourself.</p>

<h1 id="5-path-variables">5. Path Variables</h1>

<p>Add the following folder locations to your PATH environment variable. The popular <a href="https://www.rapidee.com/en/about">Rapid Environment Editor</a> is a useful tool with which to do this. Be sure to substitute your username wherever there are angular braces below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\Users\&lt;YOUR_USERNAME&gt;\AppData\Roaming\Python\Python37\Scripts
C:\Users\&lt;YOUR_USERNAME&gt;\AppData\Roaming\Python\Python37
</code></pre></div></div>

<h1 id="6-create-a-virtual-environment">6. Create a Virtual Environment</h1>

<p>First make sure that the Python virtual environment tools are installed by typing the following command in a DOS prompt.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m pip install virtualenv --user
</code></pre></div></div>

<p>Now create a virtual environment by typing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>virtualenv --no-site-packages .venv
</code></pre></div></div>

<h1 id="7-python-site-packages">7. Python Site Packages</h1>

<p>Open a command prompt and ensure that you are using the virtual environment that you just created. Here are the instructions to do this in Visual Studio Code:</p>

<ol>
  <li>Open Visual Studio Code</li>
  <li>Click the Windows Key + SHIFT + P to open the <a href="https://code.visualstudio.com/docs/getstarted/tips-and-tricks#_command-palette">command palette</a></li>
  <li>Start typing <code class="language-plaintext highlighter-rouge">python: s</code> and choose the “Select Interpreter option”
<img src="/brat/assets/images/select-interpreters-command.png" alt="select interpreter" /></li>
  <li>Choose the Python 3.7.4 virtual environment from the list.</li>
  <li>Open a command terminal by clicking <code class="language-plaintext highlighter-rouge">Windows Key + J</code> and verify that <code class="language-plaintext highlighter-rouge">.venv</code> appears before the command prompt.</li>
</ol>

<h1 id="8-cython">8. Cython</h1>

<p>Install Cython using PIP and the following command. Cython is big, so be patient!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip --timeout=120 install Cython==0.29.7
</code></pre></div></div>

<h1 id="9-gis-site-packages">9. GIS Site Packages</h1>

<p><a href="https://shapely.readthedocs.io/en/stable/index.html">Shapely</a>, <a href="https://gdal.org/">GDAL</a>, <a href="https://github.com/pyproj4/pyproj">PyProj</a> and <a href="https://rasterio.readthedocs.io/en/latest/">Rasterio</a> all need to be downloaded as pre-compiled binary files (referred to as <a href="https://pythonwheels.com">wheels</a>) and then installed using PIP. Visit the link below and download the appropriate wheel files being careful to pick the correct versions for your operating system and architecture (32 or 64 bit).</p>

<p><a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely">https://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely</a></p>

<p>Now run each of the following commands to install each downloaded wheel file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install &lt;DOWNLOAD_FOLDER&gt;/Shapely-1.6.4.post2-cp37-cp37m-win_amd64.whl
pip install &lt;DOWNLOAD_FOLDER&gt;/GDAL-2.4.1-cp37-cp37m-win_amd64.whl
pip install &lt;DOWNLOAD_FOLDER&gt;/pyproj-2.4.0-cp37-cp37m-win_amd64.whl 
pip install &lt;DOWNLOAD_FOLDER&gt;/rasterio-1.0.24+gdal24-cp37-cp37m-win_amd64.whl 
</code></pre></div></div>

<h1 id="10-scipy">10. SciPy</h1>

<p>Download the SciPy pre-compiled wheel file from the following link and then install it at the command line using PIP.</p>

<p><a href="https://pypi.org/project/scipy/#files">https://pypi.org/project/scipy/#files</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install ~/Downloads/scipy-1.3.1-cp37-cp37m-win_amd64.whl 
</code></pre></div></div>

<h1 id="11-get-the-brat-code">11. Get the BRAT Code</h1>

<p>Get the <a href="https://github.com/Riverscapes/sqlBRAT">BRAT source code</a> from GitHub one of two ways. Those proficient with the <a href="https://git-scm.com/docs/git-svn">git version control software</a> can simply clone the repo to their computer. This method is recommended if you intend to modify or contribute to the code. If you’re keen to learn git then a good place to start is either the <a href="https://desktop.github.com/">free desktop git client provided by GitHub</a> or the excellent <a href="https://www.gitkraken.com/">GitKraken</a> software.</p>

<p>Those unfamiliar with git can simply click the green button on the right of the page to download a copy of the code. It’s recommended that you unzip the code into a folder that does not contain any spaces in the path (i.e. <code class="language-plaintext highlighter-rouge">C:\SourceCode\brat</code> and not <code class="language-plaintext highlighter-rouge">C:\Source Code\brat</code>).</p>

<h1 id="12-remaining-site-packages">12. Remaining Site Packages</h1>

<p>The remaining Python site packages can be installed directly using PIP, leveraging the <a href="https://github.com/Riverscapes/sqlBRAT/blob/master/requirements.txt">requirements.txt</a> file that comes with the BRAT source code. In the command terminal, change directory into the root of the code folder and then type the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip --timeout=120 install -r requirements.txt
</code></pre></div></div>

<h1 id="why-was-this-so-hard">Why Was This So Hard?</h1>

<p>Python is meant to be platform indepedent after all, so why do you need to download binary files etc?</p>

<p>Some of the Python site packages needed to run BRAT have their own dependencies that are written in C. This C code has to be compiled using the specific architecture of the operating sysem on which it will run (Linux, Windows 32 bit, Windows 64 bit etc). Rather than compile the C code yourself, it’s simpler to download the pre-compiled binary files that are called <a href="https://pythonwheels.com/">wheels</a>.</p>

<p>Those dependencies that are written in pure Python can simply be installed using PIP with the help of the <a href="https://github.com/Riverscapes/sqlBRAT/blob/master/requirements.txt">requirements.txt</a> file that is provided with the BRAT code and enumerates all the relevant dependencies needed.</p>
</section>
      </div>
      <div id="sidebar" class="large-4 columns large-pull-8">
          
	
	<div class="title-bar">
		<div class="title-bar-title"><i class="fa fa-file-text"></i> Page Contents</div>		
	</div>
	<div id="toc"></div>
	


<div class="title-bar">
	<div class="title-bar-title"><i class="fa fa-sitemap"></i> Site Contents
		<div id="menuCtls" class="button-group tiny show-for-medium">
				<span id="expand" class="button primary fa fa-plus has-tip top" data-tooltip title="Expand all items" aria-haspopup="true" data-disable-hover="false" ></span>
				<span id="contract" class="button primary fa fa-minus has-tip top" data-tooltip title="Contract all items" aria-haspopup="true" data-disable-hover="false" ></span>
			</div>	
	</div>
</div>
 <div id="sidenav">
			<ul id='HTMLOnlyNav'>							<li><a href='/brat/Technical_Reference/architecture.html'>Architecture</a></li>							<li><a href='/brat/Technical_Reference/calibration.html'>CONUS BRAT Calibration</a></li>							<li><a href='/brat/Technical_Reference/database.html'>Database</a></li>							<li><a href='/brat/Technical_Reference/help.html'>Help</a></li>							<li><a href='/brat/Technical_Reference/inputs.html'>Inputs</a></li>							<li><a href='/brat/Technical_Reference/installation.html'>Installation</a></li>							<li><a href='/brat/Technical_Reference/international.html'>Configuring BRAT outside the US</a></li>							<li><a href='/brat/Technical_Reference/outputs.html'>Outputs</a></li>							<li><a href='/brat/Technical_Reference/regional_regression.html'>Regional Regression Equations</a></li>							<li><a href='/brat/Technical_Reference/running_brat.html'>Running BRAT</a></li>							<li><a href='/brat/Technical_Reference/suitability.html'>Importing Suitability</a></li>							<li><a href='/brat/Validation/combined_fis.html'>Combined FIS Validation</a></li>							<li><a href='/brat/Validation/'>Validation</a></li>							<li><a href='/brat/Validation/reach_geometry.html'>Reach Geometry Validation</a></li>							<li><a href='/brat/Validation/slope_validation.html'>Slope</a></li>							<li><a href='/brat/Validation/vegetation_fix.html'>Vegetation FIS Validation</a></li>							<li><a href='/brat/Vision.html'>Vision</a></li>							<li><a href='/brat/acknowledgements.html'>Acknowledgements</a></li>							<li><a href='/brat/assets/images/favicons/manifest.json'></a></li>							<li><a href='/brat/assets/js/nav.js'>Test</a></li>							<li><a href='/brat/getting_started.html'>Getting Started</a></li>							<li><a href='/brat/'>Home</a></li>							<li><a href='/brat/references.html'>BRAT References</a></li>							<li><a href='/brat/support.html'>Support</a></li>		</ul>	
</div>

<!-- Sidebar is where the extended sidepanel stuff like mailchimp forms go -->

<!-- This is where you put your extra sidebar info like a mailchimp form -->
<a href="/">Back to riverscapes tools</a>
        </div>
    </div>
  </div>


    <footer id="footer" class="row">
<div id="rightslogo">
    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        <img src="/brat/assets/images/cc-watermarks-riverscapes_orig.png" alt="Picture">
    </a>
</div>
</footer>
    

    <script src="/brat/assets/js/jquery.min.js"></script>
    <script src="/brat/assets/js/motion-ui.min.js"></script>
    <script src="/brat/assets/js/foundation.min.js"></script>
    <script src="/brat/assets/js/toc.js"></script>
    <script src="/brat/assets/js/nav.js"></script>
    <script src="/brat/assets/js/app.js"></script>

  </body>

</html>
